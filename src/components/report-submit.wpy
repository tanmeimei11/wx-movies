<template>
  <form @submit="formSubmit" report-submit>
    <button class="report-button" formType="submit">
      <slot />
    </button>
  </form>
</template>

<style>
.report-button {
  background: transparent;
  border: none;
  height: auto;
  border-radius: 0;
  overflow: visible;
  font-size: inherit;
  text-align: inherit;
  line-height: inherit;
  border-radius: inherit;
}

.report-button:after {
  display: none;
}
</style>

<script>
import wepy from 'wepy'
import auth from '@/api/auth'
import axios from '@/utils/axios'
import config from '@/utils/config'
import tips from '@/utils/tips'

export default class ReportSubmit extends wepy.component {
  methods = {
    async formSubmit (e) {
      await auth.ready()
      tips.setLoading()
      axios.request({
        url: config.DOMAIN + '/tmpl/formid/submit',
        method: 'POST',
        data: {
          formId: e.detail.formId
        }
      })
    }
  }
}
</script>
